<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Registration Page</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js">
        </script>

        <style >
            input:valid+span:after {
                position: absolute;
                content: 'âœ“';
                padding-left: 5px;
                color: #009000;    
            }
        </style>

        <script type="text/javascript">
            
            //function to check the password rules
            function check_pwd_rules(e){
                var curr_pwd = document.getElementById('pwd').value;
                var pwd_strength = 5;
                
                //check char length
                if(curr_pwd.length > 8){
                    document.getElementById('pwd_char_check').className = "fa fa-check";
                    document.getElementById('pwd_char_check').style.setProperty('color', 'green');
                    pwd_strength += 1;
                }
                else{
                    document.getElementById('pwd_char_check').className = "fa fa-times";
                    document.getElementById('pwd_char_check').style.setProperty('color', 'red');
                    pwd_strength -= 1;
                }
                
                //check uppercase
                if(curr_pwd.match(/[A-Z]/)){
                    document.getElementById('pwd_uc_check').className = "fa fa-check";
                    document.getElementById('pwd_uc_check').style.setProperty('color', 'green');
                    pwd_strength += 1;
                }
                else{
                    document.getElementById('pwd_uc_check').className = "fa fa-times";
                    document.getElementById('pwd_uc_check').style.setProperty('color', 'red');
                    pwd_strength -= 1;
                }
                
                //check lowercase
                if(curr_pwd.match(/[a-z]/)){
                    document.getElementById('pwd_lc_check').className = "fa fa-check";
                    document.getElementById('pwd_lc_check').style.setProperty('color', 'green');
                    pwd_strength += 1;
                }
                else{
                    document.getElementById('pwd_lc_check').className = "fa fa-times";
                    document.getElementById('pwd_lc_check').style.setProperty('color', 'red');
                    pwd_strength -= 1;
                }
                
                //check number
                if(curr_pwd.match(/[0-9]/)){
                    document.getElementById('pwd_num_check').className = "fa fa-check";
                    document.getElementById('pwd_num_check').style.setProperty('color', 'green');
                    pwd_strength += 1;
                }
                else{
                    document.getElementById('pwd_num_check').className = "fa fa-times";
                    document.getElementById('pwd_num_check').style.setProperty('color', 'red');
                    pwd_strength -= 1;
                }
                
                //check against id
                if(curr_pwd !== document.getElementById('user_id').value){
                    document.getElementById('pwd_id_check').className = "fa fa-check";
                    document.getElementById('pwd_id_check').style.setProperty('color', 'green');
                }
                else{
                    document.getElementById('pwd_id_check').className = "fa fa-times";
                    document.getElementById('pwd_id_check').style.setProperty('color', 'red');
                }
                
                //check english only characters
                if(curr_pwd.match(/^[A-Za-z0-9@\-_\.]+$/)){
                    document.getElementById('pwd_eng_check').className = "fa fa-check";
                    document.getElementById('pwd_eng_check').style.setProperty('color', 'green');
                }
                else{
                    document.getElementById('pwd_eng_check').className = "fa fa-times";
                    document.getElementById('pwd_eng_check').style.setProperty('color', 'red');
                }
                
                console.log(pwd_strength);
                
                if(pwd_strength > 6){
                    document.getElementById('pwd_weak').style.setProperty('display', 'none');
                    document.getElementById('pwd_strong').style.setProperty('display', 'block');
                }
                else{
                    document.getElementById('pwd_weak').style.setProperty('display', 'block');
                    document.getElementById('pwd_strong').style.setProperty('display', 'none');
                }           
            }
            
            //function to verify email
            function verifyEmail(e) {
                if(document.getElementById('email').value === (document.getElementById('vemail').value)){
                    document.getElementById('email').style.setProperty('border', "1px solid green");
                    document.getElementById('vemail').style.setProperty('border', "1px solid green");                              
                }
                else{
                    document.getElementById('email').style.setProperty('border', "1px solid red");
                    document.getElementById('vemail').style.setProperty('border', "1px solid red");                 
                }                 
            }

            //function to verify password
            function verifyPassword(e) {
                if(document.getElementById('pwd').value === (document.getElementById('v_pwd').value)){
                    document.getElementById('pwd').style.setProperty('border', "1px solid green");
                    document.getElementById('v_pwd').style.setProperty('border', "1px solid green");
                    document.getElementById('pwd_error_message').style.setProperty('display', "none");
                }
                else{
                    document.getElementById('pwd').style.setProperty('border', "1px solid red");
                    document.getElementById('v_pwd').style.setProperty('border', "1px solid red");
                    document.getElementById('pwd_error_message').style.setProperty('display', "block");
                }                 
            }

            //function to store the registration data in the local storage
            window.onload = function() {
                if(localStorage){
                    document.getElementById('submitbutton').addEventListener('click', function() {
                        var userID = document.getElementById('user_id').value;
                        var password = document.getElementById('pwd').value;
                        var email = document.getElementById('email').value;
                        var security1 = document.getElementById('security1').value;
                        var sAns1 = document.getElementById('sAns1').value;
                        var security2 = document.getElementById('security2').value;
                        var sAns2 = document.getElementById('sAns2').value;
                        var phone = document.getElementById('mob').value;
                        var address = document.getElementById('add').value;
                        var interest = document.getElementById('interest').value;                        

                        localStorage.setItem('user_id', userID);
                        localStorage.setItem('password', password);
                        localStorage.setItem('email', email);
                        localStorage.setItem('SQ1', security1);
                        localStorage.setItem('SA1',sAns1);
                        localStorage.setItem('SQ2',security2);
                        localStorage.setItem('SA2', sAns2);
                        localStorage.setItem('phone', phone);
                        localStorage.setItem('address', address);
                        localStorage.setItem('interest', interest);

                    })
                };
            }

        </script>
    </head>

    <body>
        
        <div class="container border h-80 w-80 m-auto p-2 bg-light">

            <div class="d-flex border-bottom mb-2"> 
                <img src="./arrow-icon.jpg" alt="arrow" height="27 px" width="25px">&nbsp;
                <h4 class="text-dark">Registration Form</h4>
            </div>
            
            <div class="row m-1 p-2">
                <form class="form-inline" id="RegistrationForm"> 

                    <div class="col-md-9 form-group m-1">
                        <label class="col-md-3 control-label " for="user_id">User ID:</label>
                        <input class="col-md-6 form-control" type="text" name="userID" id="user_id" required/>
                    </div> 

                    <div class="col-md-9 form-group m-1">                
                        <label class="col-md-3" for="pwd">Password:</label>
                        <input class="col-md-6 form-control" type="password" name="pwd" id="pwd" onchange="check_pwd_rules();" onfocus="document.getElementById('pwd_rules_popup').style.setProperty('display', 'block')" onblur="document.getElementById('pwd_rules_popup').style.setProperty('display', 'none')" onkeyup="this.onchange();" required aria-required="true" />
                        <div style="margin-left: 680px; margin-top: 80px; border: 4px solid gray; padding:10px; position: absolute; width: 300px; display:none" id="pwd_rules_popup">
                                <label style="margin-top:-10px ;margin-left:-10px;margin-right:-10px; color:white; background-color:black">Password Strength</label><br>
                                <i class="fa fa-times" style="color:red" id="pwd_uc_check"></i> 1 Uppercase letter <br />
                                <i class="fa fa-times" style="color:red" id="pwd_lc_check"></i> 1 Lowercase letter <br />
                                <i class="fa fa-times" style="color:red" id="pwd_num_check"></i> 1 Number <br />
                                <i class="fa fa-times" style="color:red" id="pwd_char_check"></i> More than 8 chars <br />
                                <i class="fa fa-times" style="color:red" id="pwd_eng_check"></i> Uses only English characters: A-z, 0-9, @, -, _, and .<br />
                                <i class="fa fa-times" style="color:red" id="pwd_id_check"></i> Cannot be same as your user ID
                        </div>
                        <div id="pwd_strong" style="background-color: green; color: white; font-weight: bold; margin-left:5px; padding: 3px; font-size:0.8rem; display:none;">
                            Strong
                        </div>
                        <div id="pwd_weak" style="background-color: orange; color: white; font-weight: bold; margin-left:5px; padding: 3px; font-size:0.8rem; display:block;">
                            Weak
                        </div>
                    </div> 

                    <div class="col-md-9 form-group m-1">
                        <label class="col-md-3" for="v_pwd">Verify Password:</label>
                        <input class="col-md-6 form-control" type="password" name="vpwd" id="v_pwd" onfocusout ="verifyPassword();" required/>
                        <div style="padding-left: 5px; color: red; display:none" id="pwd_error_message">Passwords don't match!</div>
                    </div>

                    <div class="col-md-9 form-group m-1">
                        <label class="col-md-3" for="email">Email:</label>
                        <input class="col-md-6 form-control" type="email" 
                        name="email" id="email" 
                        pattern="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?" 
                        required aria-required="true"/>
                        <span class="validity"></span>
                    </div>

                    <div class="col-md-9 form-group m-1">
                        <label class="col-md-3" for="vemail">Verify Email:</label>
                        <input class="col-md-6 form-control" type="email" name="vemail" 
                        id="vemail" onfocusout="verifyEmail();" pattern="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?" 
                        required aria-required="true"/>
                        <span class="validity"></span>
                    </div>

                    <div class="col-md-9 form-group m-1">
                        <label  class="col-md-3" for="security1">Security Question:</label>
                        <input class="col-md-6 form-control" list="securityQuestion1" id="security1" name="security">
                        <datalist id="securityQuestion1">
                            <option value="Sum of 2 + 3 = ">
                            <option value="Sum of 100 + 200 = ">
                            <option value= " 23 * 100 = ">
                            <option value= "Capital of India ? ">
                            <option value= "Capital of USA ?">
                        </datalist>
                    </div>

                    <div class="col-md-9 form-group m-1">
                        <label  class="col-md-3" for="sAns1">Security Answer:</label>
                        <input class="col-md-6 form-control" type="text" name="sAns1" id="sAns1" required />
                    </div>

                    <div class="col-md-9 form-group m-1">
                    <label class="col-md-3" for="security2">Security Question:</label>
                    <input class="col-md-6 form-control" list="securityQuestion2" id="security2" name="security">
                    <datalist id="securityQuestion2">
                        <option value="Sum of 2 + 3 = ">
                        <option value="Sum of 100 + 200 = ">
                        <option value= " 23 * 100 = ">
                        <option value= "Capital of India ? ">
                        <option value= "Capital of USA ?">
                    </datalist>
                    </div>
                   
                    <div class="col-md-9 form-group m-1">        
                        <label class="col-md-3" for="sAns">Security Answer:</label>
                        <input class="col-md-6 form-control" type="text" name="sAns2" id="sAns2" required />
                    </div>

                    <div class="col-md-9 form-group m-1">        
                        <label class="col-md-3" for="mob">Mobile:</label>
                        <input class="col-md-6 form-control" type="tel" name="mob" id="mob" 
                        pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" placeholder="123-456-7890" required />
                        <span class="validity"></span>
                    </div>

                    <div class="col-md-9 form-group m-1">        
                        <label class="col-md-3" for="add">Address:</label>
                        <textarea class="col-md-6 form-control" name="add" id="add" rows="3" cols="60" required></textarea>
                    </div>
                    <div class="col-md-9 form-group m-1">        
                        <label class="col-md-3" for="interest">Areas you might be interested in:</label>
                        <textarea class="col-md-6 form-control" name="interest" id="interest" rows="4" cols="70" required></textarea>
                    </div>

                    <div class="col-md-9 form-group m-1">
                        <button type="submit" id="submitbutton" class="btn btn-success col-md-3 m-2">Register</button>
                        <button type="reset" class="btn btn-danger col-md-3 m-2 pl-2">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
</body>
</html>